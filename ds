#! /usr/bin/env bash

ROOT_DIR="$(dirname "$0")"
source "$ROOT_DIR"/util.sh || exit 1

command="$1"

function print_version() {
	sed -n '/version/s,.*=\(.*\),\1,p' VERSION
}

function print_help() {
	local version=$(print_version)
	printf '\n\tds (%s) - devspace is a tool to provide a means to move all the software engineering work to RAM\n' "$version"
	printf '\tusage:\n\t\t%s start|list|pull|sync|version|help [OPTIONS]\n\n' "$0"
}

case "$command" in
	"version")
		shift
		print_version "$@"
		;;
	"help")
		shift
		print_help "$@"
		;;
	*)
		shift
		script="ds-$command"
		type "$script" >/dev/null 2>&1 ||
			error 'unknown command "%s"' "$command" &&
			"$script" "$@"
		;;
esac
